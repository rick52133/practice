<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>

    </style>
</head>

<body>
    <div id="showAxios"></div>
    <input type="text" id='textInput'><button id='btn'>加入代辦</button>
    <ul id='list'>

    </ul>


    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        let jsonArray = document.getElementById('showAxios').innerText
        // axios.get('https://hexschool.github.io/ajaxHomework/data.json')
        //     // .then((res) => res.json())
        //     .then(res => {
        //         jsonArray = res.data
        //         console.log(jsonArray)
        //     })
        //     .catch((error) => { console.error(error) })

        // console.log(jsonArray)


        // const instance = axios.create({
        //     baseURL: 'https://api.kcg.gov.tw',
        //     // timeout: 5,
        //     headers: { 'Content-Type': 'application/json' }
        // })

        // instance.get('/api/service/get/9c8e1450-e833-499c-8320-29b36b7ace5c')
        //     .then(res => console.log(res.data.data.XML_Head.Infos.Info))



        // axios({
        //     method: 'get',
        //     baseURL: 'https://api.kcg.gov.tw',
        //     url: '/api/service/get/9c8e1450-e833-499c-8320-29b36b7ace5c',
        //     'Content-Type': 'application/json',
        // })
        //     .then((result) => {
        //         console.log(result)

        //         console.log(result.data.data.XML_Head.Infos.Info)
        //         jsonArray = result.data
        //     })
        //     .catch((err) => { console.error(err) })
        // https://codepen.io/nick-hsieh/pen/bGBaEBE

        let storage = localStorage
        storage['list'] = storage['list'] || ''
        let u = document.get
        let textInput = document.getElementById('textInput')
        let btn = document.getElementById('btn')
        let list = document.getElementById('list')
        update()

        btn.addEventListener('click', function () {
            if (!textInput.value) {
                return
            }
            storage['list'] += `${textInput.value},`
            update()

            textInput.value = ""
        })

        list.addEventListener('click', function (e) {
            e.preventDefault()
            if (e.target.nodeName !== 'A') {
                return
            }
            storage['list'] = storage['list'].replace(`${e.target.parentNode.innerText.replace('刪除 ', '')},`, '')
            list.removeChild(e.target.parentNode)
        })

        function update() {
            let listArray = storage['list'].split(',')
            let str = ""
            for (let i = 0; i < listArray.length - 1; i++) {

                str += `<li><a href="youtube.com" class="deleteBtn">刪除</a> ${listArray[i]}</li>`

            }
            if (str) {
                list.innerHTML = str
            }

            deleteBtn = document.querySelectorAll('.deleteBtn')
            // delBtn()
        }


        // function delBtn() {
        //     for (let i = 0; i < deleteBtn.length; i++) {
        //         deleteBtn[i].addEventListener('click', (e) => {
        //             e.preventDefault()
        //             storage['list'] = storage['list'].replace(`${e.target.parentNode.innerText.replace('刪除 ', '')},`, '')
        //             list.removeChild(e.target.parentNode)

        //         })

        //     }
        // }







        function buyItem(money) {
            var myMoney = money;
            console.log(this);          // 趁機偷問，此地的 this 指向誰？
            return function (price) {
                console.log(this);        // 趁機偷問，此地的 this 指向誰？
                // myMoney 第一次由外部傳入，接下來在這個 function 內不斷更新
                myMoney = myMoney - price;
                return myMoney;
            }
        }
        let MingCost = buyItem(1000);
        let JayCost = buyItem(10000); // 杰哥拿出的小錢

        // 小明的內層作用域變數，也就是小明剩的錢
        console.log(MingCost(100)); // 900
        console.log(MingCost(100)); // 800
        console.log(MingCost(100));

        var originCash = 1000;
        function updateEasyCard(cash = 100) {
            var money = cash + originCash;
            console.log('我有 ' + money + ' 元');
        }

        updateEasyCard(); // 我有 1100 元

        callSomeone('杰倫哥'); // 只有 function 會被提升
        function callSomeone(name) {
            console.log('打給 ' + name)
        }

        var ming = {
            name: '小明'
        }
        var casper = {
            name: '卡斯伯'
        }

        var run = function () {
            return this.name + ' 跑向世界的另一端'
        }
        let a = ming

        console.log(a, ming); // "小明 跑向世界的另一端"
        console.log(ming); // "小明 跑向世界的另一端"



        function PhoneTemplate(brand, modal, withCamera) {
            this.brand = brand;
            this.modal = modal;
            this.withCamera = withCamera || false;
            this.takePhoto = function () {
                if (this.withCamera) {
                    console.log(this.modal + ' 照相');
                } else {
                    console.log(this.modal + ' 這台沒有照相功能');
                }
            }
        }

        var sonyPhone = new PhoneTemplate('Sony', 'Z100', true)
        sonyPhone.takePhoto();

        class Person {
            constructor(age, weight) {
                this.age = age
                this.weight = weight
            }
            call_this() {
                return this
            }
            static SonCanNotUse() {
                console.log('專用')
            }

        }

        class SuperMan extends Person {
            constructor(age, weight, power) {
                super(age, weight)
                this.power = power
            }
            hello() {
                console.log(`我有${this.power}`)
            }
        }

        let person = new Person(1, 2)
        let superMan = new SuperMan(3, 2, '力量')
        console.log(person.call_this())
        console.log(superMan)
    </script>
</body>

</html>